# MA-VCG

**Децентрализованное распределение ресурсов в edge-вычислениях с использованием мультиагентных аукционных механизмов**

[![Language: Python](https://img.shields.io/badge/language-Python-blue)](https://www.python.org/)
[![License](https://img.shields.io/badge/license-MIT-green)](LICENSE)

## Обзор проекта

MA-VCG — это система децентрализованного распределения ресурсов, которая сочетает **мультиагентные технологии** с **аукционными механизмами** для эффективного распределения вычислительных задач в гетерогенных сетях edge-вычислений. Система решает проблемы масштабируемости и адаптивности в IoT-окружении благодаря децентрализованному и самоорганизующемуся подходу к управлению ресурсами.

### Основная мотивация

Традиционные централизованные подходы к распределению ресурсов в IoT-системах имеют следующие недостатки:
- Ограниченная масштабируемость из-за узких мест в системе
- Неспособность адаптироваться к динамичным условиям сети
- Единственные точки отказа
- Неэффективная работа с гетерогенными сетями с переменными задержками

**MA-VCG решает эти проблемы**, моделируя распределение ресурсов как виртуальный рынок, где:
- IoT-устройства выступают как **покупатели** вычислительных ресурсов
- Edge-узлы выступают как **продавцы** ресурсов
- Аукционный механизм **координирует справедливое и эффективное распределение**

## Архитектура

### Модель системы

Система представляется графом **G = (V, E)**, где:
- **Вершины**: 
  - Edge-узлы: **N = {n₁, n₂, ..., nₖ}** (поставщики ресурсов)
  - IoT-устройства: **D = {d₁, d₂, ..., dₘ}** (потребители ресурсов)
- **Рёбра**: Весовые коэффициенты **w(dᵢ, nⱼ)** отражают сетевые задержки

### Основные компоненты

#### 1. **Характеристика задач**
Каждая задача, генерируемая устройством dᵢ, характеризуется:
- `cpu(t)` - требования к CPU
- `mem(t)` - требования к памяти  
- `data(t)` - объём данных
- `deadline(t)` - крайний срок выполнения
- `priority(t)` - приоритет задачи

#### 2. **Ресурсы узлов**
Каждый edge-узел nⱼ предоставляет:
- `Capⱼ = {cpuⱼ, memⱼ}` - доступные ресурсы
- `Loadⱼ` - текущее использование ресурсов

#### 3. **Протокол аукциона (трёхэтапный процесс)**

##### Этап 1: Подача заявок
Агенты устройств dᵢ формируют заявки на основе максимизации полезности:

```
bᵢ(t) = max_{nⱼ ∈ N_accessible(dᵢ)} Uᵢ(t, nⱼ, τ)
```

**Функция полезности** балансирует стоимость задачи, штрафы за дедлайны и энергозатраты:
```
Uᵢ(t, nⱼ, τ) = Vᵢ(t) · φ(τ, deadline(t)) - Eᵢ(t, nⱼ)
```

Где:
- `Vᵢ(t)` - базовая стоимость задачи с учётом приоритета
- `φ(τ, deadline(t))` - экспоненциальный штраф за нарушение дедлайна
- `Eᵢ(t, nⱼ)` - энергозатраты

##### Этап 2: Оценка стоимости
Агенты edge-узлов рассчитывают стоимость выполнения:

```
Cⱼ(t, dᵢ) = C_compute(t) + C_comm(t, dᵢ) + C_load(t)
```

**Компоненты**:
- `C_compute` - вычислительные затраты (CPU + память)
- `C_comm` - коммуникационные затраты (задержка сети + передача данных)
- `C_load` - штраф за загрузку (эффекты перегрузки)

##### Этап 3: Определение победителя
Для каждой задачи t от устройства dᵢ аукционер выбирает:

```
n* = arg min_{nⱼ ∈ N_feasible(t)} Cⱼ(t, dᵢ)
```

#### 4. **Механизм VCG**

Система реализует механизм платежей **Vickrey-Clarke-Groves (VCG)** для обеспечения честности:

```
p_VCG(t) = SW_{-i} - (SW - vᵢ(x*))
```

**Гарантии**:
- ✓ Свойство раскрытия правды (нет стимула лгать о предпочтениях)
- ✓ Максимизация социального благосостояния
- ✓ Индивидуальная рациональность

## Особенности алгоритма

### Децентрализация
- Отсутствие единой точки отказа
- Агенты принимают автономные решения
- Координация через стандартизированный протокол аукциона

### Адаптивность
- Динамический ответ на изменения топологии сети
- Учёт переменных задержек и перегрузок
- Перераспределение ресурсов в реальном времени

### Справедливость
- Механизм VCG обеспечивает справедливое распределение
- Метрики справедливости на основе индекса Джайна
- Отслеживание удовлетворённости участников

### Масштабируемость
- Линейное время сходимости при росте сети
- Тестирование на сетях от 10 до 100+ узлов
- Сохранение эффективности на уровне 85-90% при масштабировании

## Экспериментальная оценка

### Сценарий тестирования
Оптимизация городского трафика с IoT-датчиками:
- Датчики обнаруживают события трафика
- Edge-узлы обрабатывают и распознают происшествия
- Система предсказывает заторы и управляет светофорами

### Метрики производительности

| Размер сети | Благосостояние | Эффективность | Справедливость | Время сходимости |
|-------------|---|---|---|---|
| Малый (10N, 20D) | 89.2% | 91.5% | 0.82 | 45мс |
| Средний (25N, 50D) | 91.8% | 88.7% | 0.84 | 78мс |
| Большой (50N, 100D) | 90.3% | 86.4% | 0.81 | 175мс |

**Ключевые результаты**:
- Отличная масштабируемость с линейной сходимостью
- Сохранение высокой эффективности (85-90%) на всех масштабах
- Справедливое распределение ресурсов (индекс Джайна ≥ 0.80)

## Установка

### Требования
- Python 3.10+
- NumPy
- Matplotlib (для визуализации)
- NetworkX (для представления графов)

### Подготовка

```bash
# Клонирование репозитория
git clone https://github.com/Dima12101/MA-VCG.git
cd MA-VCG

# Установка зависимостей
pip install networkx numpy matplotlib
```

## Использование

### Быстрый старт

```python
import random
import numpy as np
from environment import EdgeComputingSystem

# Инициализация системы (Edge-узлов и IoT-устройств)
system = EdgeComputingSystem(n_nodes=10, n_devices=20)

# Запуск аукциона
print("=== Simulation (50 rounds) ===")
results = system.run(n_rounds=50)
print(f"Average social welfare   : {results['avg_welfare']:.3f}")
print(f"Average allocation eff.  : {results['avg_efficiency']:.3f}")
print(f"Average fairness (Jain)  : {results['avg_fairness']:.3f}")
```

## Структура проекта

```
MA-VCG/
├── README.md
├── agents.py          # Реализация агентов
├── auction.py         # Логика VCG и аукциона
├── data.py            # DTO классы представления данных 
├── environment.py     # Основной класс EdgeComputingSystem
└── main.py            # Точка входа
```

## Ключевые концепции

### Функция полезности
Объединяет множественные факторы в оценке предпочтения выполнения задачи:
- **Базовая стоимость**: Приоритет × (CPU + Память) × Вес устройства
- **Штраф за дедлайн**: Экспоненциальный спад за нарушение срока
- **Энергозатраты**: Затраты энергии, специфичные для устройства

### Функция стоимости
Отражает расходы узла на выполнение задачи:
- **Вычислительные**: Затраты на CPU и память
- **Коммуникационные**: Задержка сети + передача данных
- **Штраф за загрузку**: Деградация производительности при перегрузке

### Социальное благосостояние
Измеряет общую оптимальность системы:

```
SW = Σ Σ Σ x_{i,j}^t · (bᵢ(t) - Cⱼ(t, dᵢ))
```

## Публикации

Реализация основана на:

**Терещенко, Д.В., & Корхов, В.В.** "Применение механизма аукционов и мультиагентных технологий для распределения ресурсов и задач в распределённой вычислительной системе" (*Материалы GRID 2025*, Санкт-Петербургский государственный университет)

### Ссылки на источники

[1] Городецкий В.И., Граничин О.Н., Скобелев П.О. (2022). Децентрализация, самоорганизация и эмерджентный интеллект – цифровой взрыв умных технологий. *15-я Мультиконференция по проблемам управления*, 40-54.

[2] Li, G., Zhao, H., Wu, C., et al. (2023). Nonlinear online incentive mechanism design in edge computing systems with energy budget. *IEEE Transactions on Mobile Computing*, 22(7), 4086-4102. DOI: 10.1109/TMC.2022.3148034

[3] Qiu, H., Wang, J., Li, K., et al. (2022). Applications of auction and mechanism design in edge computing: A survey. *IEEE Transactions on Cognitive Communications and Networking*, 8(2), 1034-1058. DOI: 10.1109/TCCN.2022.3147196

[4] Arrow, K.J., Sen, A., Suzumura, K. (2011). *Handbook of Social Choice and Welfare* (Vol. 2). Elsevier.

## Участие в разработке

Приветствуются контрибьюции! Пожалуйста:

1. Форкните репозиторий
2. Создайте ветку функции (`git checkout -b feature/amazing-feature`)
3. Закоммитьте изменения (`git commit -m 'Add amazing feature'`)
4. Pushьте в ветку (`git push origin feature/amazing-feature`)
5. Откройте Pull Request

## Лицензия

Этот проект лицензирован под лицензией MIT — см. файл [LICENSE](LICENSE) для деталей.

## Цитирование

Если вы используете MA-VCG в своих исследованиях, пожалуйста, цитируйте:

```bibtex
@inproceedings{tereshchenko2025auction,
  title={Применение механизма аукционов и мультиагентных технологий для распределения ресурсов и задач в распределённой вычислительной системе},
  author={Терещенко, Дмитрий В. and Корхов, Владимир В.},
  booktitle={GRID 2025},
  year={2025},
  organization={Санкт-Петербургский государственный университет}
}
```

## Контакты

- **Автор**: Дмитрий В. Терещенко
- **Email**: d.tereshchenko@spbu.ru
- **Аффилиация**: Санкт-Петербургский государственный университет

## Благодарности

Работа выполнена при поддержке Санкт-Петербургского государственного университета (проект № 121061000159-6).

---

**Последнее обновление**: Февраль 2026  
**Статус**: Активная разработка
